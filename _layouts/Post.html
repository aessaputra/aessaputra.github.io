<!DOCTYPE html>
<html lang="en">

<head>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta name="description"
        content="{{ page.description | default: site.description | default: 'Personal notes on tech, projects, and ideas — sharing insights from real-world experiments and everyday learning' }}">
    <meta content="{{ site.title | default: site.heading }}" property="og:site_name" />
    <meta content="{{ site.description | default: 'A Jekyll Garden site' }}" property="og:description">
    <meta content="{{ site.url }}/about/" property="article:author">
    {%- if site.og_image -%}
    <meta property="og:image" content="{{ site.baseurl }}{{ site.og_image }}">
    {%- endif -%}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Async load Google Fonts to prevent 750ms blocking -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    </noscript>
    {%- if page.title -%}
    <meta content="{{ page.title }}" property="og:title">
    <meta content="article" property="og:type">
    <meta content="{{ site.url }}{{ page.url }}" property="og:url">
    {%- else -%}
    <meta content="website" property="og:type">
    <meta content="{{ site.url }}{{ page.url }}" property="og:url">
    {%- endif -%}

    <title>
        {%- if page.url == "/" or page.permalink == "/" -%}
        {{ site.heading }}
        {%- elsif page.title -%}
        {{ page.title }} - {{ site.heading }}
        {%- else -%}
        {{ site.heading }}
        {%- endif -%}
    </title>

    <link rel="canonical" href="{{site.url}}{{page.url}}" />
    <link rel="icon" type="image/png" href="{{ site.baseurl }}/favicon-96x96.png" sizes="96x96">
    {%- if site.favicon -%}
    {%- assign favicon_ext = site.favicon | split: '.' | last -%}
    {%- if favicon_ext == 'svg' -%}
    <link rel="icon" type="image/svg+xml" href="{{ site.baseurl }}{{ site.favicon }}">
    {%- else -%}
    <link rel="icon" href="{{ site.baseurl }}{{ site.favicon }}">
    {%- endif -%}
    {%- endif -%}
    <link rel="shortcut icon" href="{{ site.baseurl }}/favicon.ico">
    {%- if site.apple_touch_icon -%}
    <link rel="apple-touch-icon" sizes="180x180" href="{{ site.baseurl }}{{ site.apple_touch_icon }}">
    {%- endif -%}
    <meta name="apple-mobile-web-app-title" content="{{ site.title | default: site.heading }}">
    <link rel="manifest" href="{{ site.baseurl }}/assets/img/site.webmanifest">
    <!-- Critical CSS inline to prevent CLS (Layout Shift) -->
    <style>
        /* Critical above-the-fold styles to prevent layout shift */
        body {
            margin: 0;
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }

        .container {
            max-width: 46em;
            margin: 0 auto;
            padding: 0 1em;
        }

        h1 {
            font-size: 2em;
            margin: 0.67em 0;
            font-weight: 600;
            line-height: 1.2;
        }

        h2 {
            font-size: 1.5em;
            font-weight: 600;
        }

        p {
            margin: 1em 0;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        /* Reserve space for search to prevent CLS */
        .search-container {
            min-height: 42px;
            margin: 1em 0;
        }
    </style>
    {%- if site.css_file -%}
    <link href="{{ site.baseurl }}{{ site.css_file }}" rel="stylesheet" media="all" class="default" />
    {%- else -%}
    <link href="{{ site.baseurl }}/assets/css/style.css" rel="stylesheet" media="all" class="default" />
    {%- endif -%}
    {%- if site.katex -%}
    <!-- Defer Katex CSS - not critical -->
    <link href="{{ site.baseurl }}/assets/css/vendor/Katex.css" rel="stylesheet" media="print"
        onload="this.media='all'" />
    {%- endif -%}
    <!-- Defer Syntax Highlighting CSS - not critical -->
    <link href="{{ site.baseurl }}/assets/css/fruity.css" rel="stylesheet" media="print" onload="this.media='all'" />

    <!--[if IE]>
        {%- if site.ie_css -%}
        <link href="{{ site.baseurl }}{{ site.ie_css }}" rel="stylesheet" type="text/css"/>
        {%- else -%}
        <link href="{{ site.baseurl }}/assets/css/ie-target.css" rel="stylesheet" type="text/css"/>
        {%- endif -%}
    <![endif]-->
    <!--<link href="/assets/css/prism.css" rel="stylesheet" />-->
    <link rel="alternate" type="application/rss+xml" href="{{ site.url }}/feed.xml">
</head>

<body>
    <div class="container">
        <div>
            {%- include Nav.html -%}

            <main id="main-content">
                <!-- Homepage Layout-->
                {%- if page.permalink == "/" -%}
                {%- if site.preferences.homepage.enabled -%}
                <!--- Show content from index.md when homepage is enabled -->
                {%- include Content.html -%}
                {%- else -%}
                <!--- Show content from notes.md + search + feed when homepage is disabled -->
                <h1>{{page.title}}</h1>
                {%- include Content.html -%}
                {%- include UnifiedSearch.html -%}
                {%- include Feed.html -%}
                {%- endif -%}
                {%- endif -%}

                <!--- Notes Page Layout (Search + Archive only) -->
                {%- if page.permalink == "/notes" -%}
                <h1>{{page.title}}</h1>
                {%- include Content.html -%}
                {%- include NoteSearch.html -%}
                {%- include NotesArchive.html -%}
                {%- endif -%}

                <!--- Notes Layout-->
                {%- if page.content-type == "notes" -%}
                {%- assign words = page.content | number_of_words -%}
                {%- assign minutes = words | divided_by: 200 -%}
                {%- if minutes == 0 -%}
                {%- assign minutes = 1 -%}
                {%- endif -%}
                {%- assign minute_label = "minutes" -%}
                {%- if minutes == 1 -%}
                {%- assign minute_label = "minute" -%}
                {%- endif -%}
                <h1>{{page.title}}</h1>
                <p class="post-meta">
                    {{ page.date | date: "%B %-d, %Y" }}
                    <span aria-hidden="true">·</span>
                    {{ minutes }} {{ minute_label }} read
                </p>
                {%- include Content.html -%}
                {%- if site.preferences.backlinks.enabled -%}
                {%- include Backlinks.html -%}
                {%- endif -%}
                {%- endif -%}

                <!--- Post Layout-->
                {%- if page.content-type == "post" -%}
                {%- assign words = page.content | number_of_words -%}
                {%- assign minutes = words | divided_by: 200 -%}
                {%- if minutes == 0 -%}
                {%- assign minutes = 1 -%}
                {%- endif -%}
                {%- assign minute_label = "minutes" -%}
                {%- if minutes == 1 -%}
                {%- assign minute_label = "minute" -%}
                {%- endif -%}
                <h1>{{page.title}}</h1>
                <p class="post-meta">
                    {{ page.date | date: "%B %-d, %Y" }}
                    <span aria-hidden="true">·</span>
                    {{ minutes }} {{ minute_label }} read
                </p>
                {%- include Content.html -%}
                {%- if site.preferences.backlinks.enabled -%}
                {%- include Backlinks.html -%}
                {%- endif -%}
                {%- endif -%}

                <!--- Static Page Layout-->
                {%- if page.content-type == "static" -%}
                <h1>{{page.title}}</h1>
                {%- include Content.html -%}
                {%- endif -%}

                <!--- Writing Page Layout (Search + Archive) -->
                {%- if page.permalink == "/writing" -%}
                <h1>{{page.title}}</h1>
                {%- include Content.html -%}
                {%- include PostSearch.html -%}
                {%- include PostArchive.html -%}
                {%- endif -%}
            </main>

            {%- include Footer.html -%}
        </div>
    </div>
    {%- if page.mermaid or site.mermaid -%}
    {%- include mermaid.html -%}
    {%- endif -%}
</body>

</html>